{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sherali Toshniyozov</title>

    <!--
    - favicon
  -->
    <link
      rel="shortcut icon"
      href="{% static 'portfolio/images/logo.ico' %}"
      type="image/x-icon"
    />

    <!--
    - custom css link
  -->
    <link rel="stylesheet" href="{% static 'portfolio/css/style.css' %}" />

    <!--
    - google font link
  -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <!--
    - #MAIN
  -->

    <main>
      <!--
      - #SIDEBAR
    -->

      <aside class="sidebar" data-sidebar>
        <div class="sidebar-info">
          <figure class="avatar-box">
            <img
              src="{% if profile.avatar %}{{ profile.avatar.url }}{% else %}{% static 'portfolio/images/my-avatar.png' %}{% endif %}"
              alt="{{ profile.name|default:'Sherali Toshniyozov' }}"
              width="80"
            />
          </figure>

          <div class="info-content">
            <h1 class="name" title="{{ profile.name|default:'Sherali Toshniyozov' }}">{{ profile.name|default:'Sherali Toshniyozov' }}</h1>

            <p class="title">{{ profile.title|default:'Web developer' }}</p>
          </div>

          <button class="info_more-btn" data-sidebar-btn>
            <span>Show Contacts</span>

            <ion-icon name="chevron-down"></ion-icon>
          </button>
        </div>

        <div class="sidebar-info_more">
          <div class="separator"></div>

          <ul class="contacts-list">
            {% if profile.email %}
            <li class="contact-item">
              <div class="icon-box">
                <ion-icon name="mail-outline"></ion-icon>
              </div>

              <div class="contact-info">
                <p class="contact-title">Email</p>

                <a href="mailto:{{ profile.email }}" class="contact-link"
                  >{{ profile.email }}</a
                >
              </div>
            </li>
            {% endif %}

            {% if profile.phone %}
            <li class="contact-item">
              <div class="icon-box">
                <ion-icon name="phone-portrait-outline"></ion-icon>
              </div>

              <div class="contact-info">
                <p class="contact-title">Phone</p>

                <a href="tel:{{ profile.phone }}" class="contact-link"
                  >{{ profile.phone }}</a
                >
              </div>
            </li>
            {% endif %}

            {% if profile.birthday %}
            <li class="contact-item">
              <div class="icon-box">
                <ion-icon name="calendar-outline"></ion-icon>
              </div>

              <div class="contact-info">
                <p class="contact-title">Birthday</p>

                <time datetime="{{ profile.birthday|date:'Y-m-d' }}">{{ profile.birthday|date:'F d, Y' }}</time>
              </div>
            </li>
            {% endif %}

            {% if profile.location %}
            <li class="contact-item">
              <div class="icon-box">
                <ion-icon name="location-outline"></ion-icon>
              </div>

              <div class="contact-info">
                <p class="contact-title">Location</p>

                <address>{{ profile.location }}</address>
              </div>
            </li>
            {% endif %}
          </ul>

          <div class="separator"></div>

          <ul class="social-list">
            {% if profile.facebook_url %}
            <li class="social-item">
              <a href="{{ profile.facebook_url }}" class="social-link" target="_blank">
                <ion-icon name="logo-facebook"></ion-icon>
              </a>
            </li>
            {% endif %}

            {% if profile.twitter_url %}
            <li class="social-item">
              <a href="{{ profile.twitter_url }}" class="social-link" target="_blank">
                <ion-icon name="logo-twitter"></ion-icon>
              </a>
            </li>
            {% endif %}

            {% if profile.instagram_url %}
            <li class="social-item">
              <a href="{{ profile.instagram_url }}" class="social-link" target="_blank">
                <ion-icon name="logo-instagram"></ion-icon>
              </a>
            </li>
            {% endif %}

            {% if profile.linkedin_url %}
            <li class="social-item">
              <a href="{{ profile.linkedin_url }}" class="social-link" target="_blank">
                <ion-icon name="logo-linkedin"></ion-icon>
              </a>
            </li>
            {% endif %}

            {% if profile.github_url %}
            <li class="social-item">
              <a href="{{ profile.github_url }}" class="social-link" target="_blank">
                <ion-icon name="logo-github"></ion-icon>
              </a>
            </li>
            {% endif %}
          </ul>
        </div>
      </aside>

      <!--
      - #main-content
    -->

      <div class="main-content">
        <!--
        - #NAVBAR
      -->

        <nav class="navbar">
          <ul class="navbar-list">
            <li class="navbar-item">
              <button class="navbar-link active" data-nav-link>About</button>
            </li>

            <li class="navbar-item">
              <button class="navbar-link" data-nav-link>Resume</button>
            </li>

            <li class="navbar-item">
              <button class="navbar-link" data-nav-link>Portfolio</button>
            </li>

            <li class="navbar-item">
              <button class="navbar-link" data-nav-link>Blog</button>
            </li>

            <li class="navbar-item">
              <button class="navbar-link" data-nav-link>Contact</button>
            </li>
          </ul>
        </nav>

        <!--
        - #ABOUT
      -->

        <article class="about active" data-page="about">
          <header>
            <h2 class="h2 article-title">About me</h2>
          </header>

          <section class="about-text">
            {% if profile.bio %}
              {{ profile.bio|linebreaks }}
            {% else %}
            <p>
              I'm Creative Director and UI/UX Designer from Sydney, Australia,
              working in web development and print media. I enjoy turning
              complex problems into simple, beautiful and intuitive designs.
            </p>

            <p>
              My job is to build your website so that it is functional and
              user-friendly but at the same time attractive. Moreover, I add
              personal touch to your product and make sure that is eye-catching
              and easy to use. My aim is to bring across your message and
              identity in the most creative way. I created web design for many
              famous brand companies.
            </p>
            {% endif %}
          </section>

          <!--
          - service
        -->

          <section class="service">
            <h3 class="h3 service-title">What i'm doing</h3>

            <ul class="service-list">
              {% for service in services %}
              <li class="service-item">
                <div class="service-icon-box">
                  <img
                    src="{% if service.icon %}{{ service.icon.url }}{% else %}{% static 'portfolio/images/icon-design.svg' %}{% endif %}"
                    alt="{{ service.name }} icon"
                    width="40"
                  />
                </div>

                <div class="service-content-box">
                  <h4 class="h4 service-item-title">{{ service.name }}</h4>

                  <p class="service-item-text">
                    {{ service.description }}
                  </p>
                </div>
              </li>
              {% empty %}
              <li class="service-item">
                <div class="service-icon-box">
                  <img
                    src="{% static 'portfolio/images/icon-design.svg' %}"
                    alt="design icon"
                    width="40"
                  />
                </div>

                <div class="service-content-box">
                  <h4 class="h4 service-item-title">Web design</h4>

                  <p class="service-item-text">
                    The most modern and high-quality design made at a
                    professional level.
                  </p>
                </div>
              </li>
              {% endfor %}
            </ul>
          </section>

          <!--
          - testimonials
        -->

          <section class="testimonials">
            <h3 class="h3 testimonials-title">Testimonials</h3>

            <ul class="testimonials-list has-scrollbar">
              {% for testimonial in testimonials %}
              <li class="testimonials-item">
                <div class="content-card" data-testimonials-item>
                  <figure class="testimonials-avatar-box">
                    <img
                      src="{{ testimonial.client_avatar.url }}"
                      alt="{{ testimonial.client_name }}"
                      width="60"
                      data-testimonials-avatar
                    />
                  </figure>

                  <h4
                    class="h4 testimonials-item-title"
                    data-testimonials-title
                  >
                    {{ testimonial.client_name }}
                  </h4>

                  <div class="testimonials-text" data-testimonials-text>
                    <p>
                      {{ testimonial.content }}
                    </p>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </section>

          <!--
          - testimonials modal
        -->

          <div class="modal-container" data-modal-container>
            <div class="overlay" data-overlay></div>

            <section class="testimonials-modal">
              <button class="modal-close-btn" data-modal-close-btn>
                <ion-icon name="close-outline"></ion-icon>
              </button>

              <div class="modal-img-wrapper">
                <figure class="modal-avatar-box">
                  <img
                    src="{% static 'portfolio/images/avatar-1.png' %}"
                    alt="Daniel lewis"
                    width="80"
                    data-modal-img
                  />
                </figure>

                <img
                  src="{% static 'portfolio/images/icon-quote.svg' %}"
                  alt="quote icon"
                />
              </div>

              <div class="modal-content">
                <h4 class="h3 modal-title" data-modal-title>Daniel lewis</h4>

                <time datetime="2021-06-14">14 June, 2021</time>

                <div data-modal-text>
                  <p>
                    Richard was hired to create a corporate identity. We were
                    very pleased with the work done. She has a lot of experience
                    and is very concerned about the needs of client. Lorem ipsum
                    dolor sit amet, ullamcous cididt consectetur adipiscing
                    elit, seds do et eiusmod tempor incididunt ut laborels
                    dolore magnarels alia.
                  </p>
                </div>
              </div>
            </section>
          </div>

          <!--
          - clients
        -->

          <section class="clients">
            <h3 class="h3 clients-title">Clients</h3>

            <ul class="clients-list has-scrollbar">
              {% for client in clients %}
              <li class="clients-item">
                <a href="{% if client.website %}{{ client.website }}{% else %}#{% endif %}" {% if client.website %}target="_blank"{% endif %}>
                  <img
                    src="{{ client.logo.url }}"
                    alt="{{ client.name }} logo"
                  />
                </a>
              </li>
              {% endfor %}
            </ul>
          </section>
        </article>

        <!--
        - #RESUME
      -->

        <article class="resume" data-page="resume">
          <header>
            <h2 class="h2 article-title">Resume</h2>
          </header>

          <section class="timeline">
            <div class="title-wrapper">
              <div class="icon-box">
                <ion-icon name="book-outline"></ion-icon>
              </div>

              <h3 class="h3">Education</h3>
            </div>

            <ol class="timeline-list">
              {% for entry in education %}
              <li class="timeline-item">
                <h4 class="h4 timeline-item-title">
                  {{ entry.title }}
                </h4>

                <span>{{ entry.start_date|date:"Y" }} — {% if entry.end_date %}{{ entry.end_date|date:"Y" }}{% else %}Present{% endif %}</span>

                <p class="timeline-text">
                  {{ entry.description }}
                </p>
              </li>
              {% endfor %}
            </ol>
          </section>

          <section class="timeline">
            <div class="title-wrapper">
              <div class="icon-box">
                <ion-icon name="book-outline"></ion-icon>
              </div>

              <h3 class="h3">Experience</h3>
            </div>

            <ol class="timeline-list">
              {% for entry in experience %}
              <li class="timeline-item">
                <h4 class="h4 timeline-item-title">{{ entry.title }}</h4>

                <span>{{ entry.start_date|date:"Y" }} — {% if entry.end_date %}{{ entry.end_date|date:"Y" }}{% else %}Present{% endif %}</span>

                <p class="timeline-text">
                  {{ entry.description }}
                </p>
              </li>
              {% endfor %}
            </ol>
          </section>

          <section class="skill">
            <h3 class="h3 skills-title">My skills</h3>

            <ul class="skills-list content-card">
              {% for skill in skills %}
              <li class="skills-item">
                <div class="title-wrapper">
                  <h5 class="h5">{{ skill.name }}</h5>
                  <data value="{{ skill.proficiency }}">{{ skill.proficiency }}%</data>
                </div>

                <div class="skill-progress-bg">
                  <div class="skill-progress-fill" style="width: {{ skill.proficiency }}%"></div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </section>
        </article>

        <!--
        - #PORTFOLIO
      -->

        <article class="portfolio" data-page="portfolio">
          <header>
            <h2 class="h2 article-title">Portfolio</h2>
          </header>

          <section class="projects">
            <ul class="filter-list">
              <li class="filter-item">
                <button class="active" data-filter-btn>All</button>
              </li>

              {% for category in categories %}
              <li class="filter-item">
                <button data-filter-btn>{{ category.name }}</button>
              </li>
              {% endfor %}
            </ul>

            <div class="filter-select-box">
              <button class="filter-select" data-select>
                <div class="select-value" data-selecct-value>
                  Select category
                </div>

                <div class="select-icon">
                  <ion-icon name="chevron-down"></ion-icon>
                </div>
              </button>

              <ul class="select-list">
                <li class="select-item">
                  <button data-select-item>All</button>
                </li>

                {% for category in categories %}
                <li class="select-item">
                  <button data-select-item>{{ category.name }}</button>
                </li>
                {% endfor %}
              </ul>
            </div>

            <ul class="project-list">
              {% for project in projects %}
              <li
                class="project-item active"
                data-filter-item
                data-category="{{ project.category.name|lower }}"
              >
                <a href="{% if project.link %}{{ project.link }}{% else %}#{% endif %}" {% if project.link %}target="_blank"{% endif %}>
                  <figure class="project-img">
                    <div class="project-item-icon-box">
                      <ion-icon name="eye-outline"></ion-icon>
                    </div>

                    <img
                      src="{{ project.image.url }}"
                      alt="{{ project.title }}"
                      loading="lazy"
                    />
                  </figure>

                  <h3 class="project-title">{{ project.title }}</h3>

                  <p class="project-category">{{ project.category.name }}</p>
                </a>
              </li>
              {% endfor %}
            </ul>
          </section>
        </article>

        <!--
        - #BLOG
      -->

        <article class="blog" data-page="blog">
          <header>
            <h2 class="h2 article-title">Blog</h2>
          </header>

          <section class="blog-posts">
            <ul class="blog-posts-list">
              {% for blog_post in blog_posts %}
              <li class="blog-post-item">
                <a href="#">
                  <figure class="blog-banner-box">
                    <img
                      src="{{ blog_post.featured_image.url }}"
                      alt="{{ blog_post.title }}"
                      loading="lazy"
                    />
                  </figure>

                  <div class="blog-content">
                    <div class="blog-meta">
                      <p class="blog-category">{{ blog_post.category }}</p>

                      <span class="dot"></span>

                      <time datetime="{{ blog_post.published_date|date:'Y-m-d' }}">{{ blog_post.published_date|date:'M d, Y' }}</time>
                    </div>

                    <h3 class="h3 blog-item-title">
                      {{ blog_post.title }}
                    </h3>

                    <p class="blog-text">
                      {{ blog_post.excerpt|truncatewords:15 }}
                    </p>
                  </div>
                </a>
              </li>
              {% endfor %}
            </ul>
          </section>
        </article>

        <!--
        - #CONTACT
      -->

        <article class="contact" data-page="contact">
          <header>
            <h2 class="h2 article-title">Contact</h2>
          </header>

          <section class="mapbox" data-mapbox>
            <figure>
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d199666.5651251294!2d-121.58334177520186!3d38.56165006739519!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x809ac672b28397f9%3A0x921f6aaa74197fdb!2sSacramento%2C%20CA%2C%20USA!5e0!3m2!1sen!2sbd!4v1647608789441!5m2!1sen!2sbd"
                width="400"
                height="300"
                loading="lazy"
              ></iframe>
            </figure>
          </section>

          <section class="contact-form">
            <h3 class="h3 form-title">Contact Form</h3>

            <form action="{% url 'contact' %}" method="POST" class="form" data-form id="contact-form">
              {% csrf_token %}
              <div class="input-wrapper">
                <input
                  type="text"
                  name="full_name"
                  class="form-input"
                  placeholder="Full name"
                  required
                  data-form-input
                />

                <input
                  type="email"
                  name="email"
                  class="form-input"
                  placeholder="Email address"
                  required
                  data-form-input
                />
              </div>

              <textarea
                name="message"
                class="form-input"
                placeholder="Your Message"
                required
                data-form-input
              ></textarea>

              <button class="form-btn" type="submit" disabled data-form-btn>
                <ion-icon name="paper-plane"></ion-icon>
                <span>Send Message</span>
              </button>
            </form>
            <div id="form-message" style="margin-top: 1rem; display: none;"></div>
          </section>
        </article>
      </div>
    </main>

    <!--
    - custom js link
  -->
    <script src="{% static 'portfolio/js/script.js' %}"></script>

    <!--
    - contact form submission handler
  -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const contactForm = document.getElementById('contact-form');
        const formMessage = document.getElementById('form-message');

        if (contactForm) {
          contactForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = new FormData(contactForm);
            const submitBtn = contactForm.querySelector('[data-form-btn]');
            const btnText = submitBtn.querySelector('span');
            const originalText = btnText.textContent;

            // Disable button and show loading state
            submitBtn.disabled = true;
            btnText.textContent = 'Sending...';

            fetch(contactForm.action, {
              method: 'POST',
              body: formData,
              headers: {
                'X-Requested-With': 'XMLHttpRequest',
              }
            })
            .then(response => response.json())
            .then(data => {
              formMessage.style.display = 'block';
              formMessage.style.color = '#4CAF50';
              formMessage.textContent = data.message || 'Thank you! Your message has been sent successfully.';
              contactForm.reset();

              // Hide message after 5 seconds
              setTimeout(() => {
                formMessage.style.display = 'none';
              }, 5000);
            })
            .catch(error => {
              formMessage.style.display = 'block';
              formMessage.style.color = '#f44336';
              formMessage.textContent = 'Sorry, there was an error sending your message. Please try again.';
              console.error('Error:', error);
            })
            .finally(() => {
              submitBtn.disabled = false;
              btnText.textContent = originalText;
            });
          });
        }
      });
    </script>

    <!--
    - ionicon link
  -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
  </body>
</html>
